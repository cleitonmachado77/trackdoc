// Script para corrigir o problema da coluna approval_required
console.log('ðŸ”§ Para corrigir o erro da coluna approval_required, execute os seguintes comandos SQL no Supabase:')
console.log('')
console.log('1. Acesse o Supabase Dashboard > SQL Editor')
console.log('2. Execute o seguinte SQL:')
console.log('')
console.log('-- Adicionar coluna approval_required Ã  tabela documents')
console.log('ALTER TABLE public.documents ADD COLUMN IF NOT EXISTS approval_required BOOLEAN DEFAULT false;')
console.log('')
console.log('-- Criar Ã­ndice para melhor performance')
console.log('CREATE INDEX IF NOT EXISTS idx_documents_approval_required ON public.documents (approval_required) WHERE approval_required = true;')
console.log('')
console.log('-- Atualizar documentos existentes baseado no tipo de documento')
console.log('UPDATE public.documents SET approval_required = COALESCE((SELECT dt.approval_required FROM document_types dt WHERE dt.id = documents.document_type_id), false) WHERE approval_required IS NULL;')
console.log('')
console.log('âœ… ApÃ³s executar esses comandos, o upload de documentos funcionarÃ¡ normalmente.')
console.log('')
console.log('ðŸ“‹ Alternativamente, vocÃª pode executar a migraÃ§Ã£o usando:')
console.log('npx supabase db push')
console.log('')
console.log('ðŸŽ¯ O problema ocorreu porque o cÃ³digo estÃ¡ tentando inserir dados na coluna approval_required que nÃ£o existe na tabela documents.')